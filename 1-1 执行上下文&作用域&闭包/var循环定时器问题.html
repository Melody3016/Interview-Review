<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    /* for (var index = 1; index <= 5; index++) {
      setTimeout(() => {
        console.log(new Date(), index)
      }, index * 1000)
    } */
    // 1  6
    // 2  6
    // 3  6
    // 4  6
    // 5  6

    // 使用闭包实现每秒打印数字1-5
    /* for (var index = 1; index <= 5; index++) {
      (function(j) {
        setTimeout(() => {
          console.log(new Date(), j)
        }, j * 1000)
      })(index)
    } */

    // 使用let实现每秒打印数字1-5
    /* for (let index = 1; index <= 5; index++) {
      setTimeout(() => {
        console.log(new Date(), index)
      }, index * 1000)
    } */

    // 实现 0 -> 1 -> 2 -> 3 -> 4 -> 5
    // 使用Promise
    /* const task = []
    function output(i) {
      return new Promise(resolve => {
        setTimeout(function () {
          console.log(new Date, i)
          resolve()
        }, i * 1000)
      })  
    }
    for (var i = 0; i < 5; i++) {
      task.push(output(i))
    }
    // 执行所有Promise
    Promise.all(task).then(() => {
      setTimeout(() => {
        console.log(new Date, i)
      }, 1000)
    }) */

    // 使用async await
    (async function () {
      for (var i = 0; i < 5; i++) {
        await new Promise(resolve => {
          setTimeout(() => {
            console.log(new Date, i)
            resolve()
          }, 1000)
        })
      }
      setTimeout(() => {
        console.log(new Date, i)
      }, 1000)
    })()
  </script>
</body>

</html>